<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Turnos de cuidado — Amado</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-800 font-sans p-6">
  <div class="max-w-5xl mx-auto">
    <h1 class="text-2xl font-bold mb-6 text-center">Turnos de cuidado — Amado</h1>

    <div id="status" class="text-center text-gray-500 mb-4">Cargando horario...</div>

    <div class="overflow-x-auto shadow-lg rounded-2xl bg-white">
      <table id="tabla-horarios" class="w-full border-collapse hidden">
        <thead class="bg-blue-100">
          <tr>
            <th class="p-3 text-left">Día</th>
            <th class="p-3 text-left">Mañana</th>
            <th class="p-3 text-left">Tarde</th>
            <th class="p-3 text-left">Noche</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <script>
    async function cargarHorario() {
      const statusEl = document.getElementById("status");
      const tabla = document.getElementById("tabla-horarios");
      const tbody = tabla.querySelector("tbody");

      try {
        const resp = await fetch("/horarios.json");
        if (!resp.ok) throw new Error("No se pudo cargar horarios.json");
        const data = await resp.json();

        // Limpiar
        tbody.innerHTML = "";

        // Iterar días
        Object.keys(data).forEach(dia => {
          const fila = document.createElement("tr");
          fila.className = "border-b hover:bg-blue-50";

          // Día
          const celDia = document.createElement("td");
          celDia.className = "p-3 font-medium text-gray-700";
          celDia.textContent = dia;
          fila.appendChild(celDia);

          // Mañana, tarde, noche
          ["mañana", "tarde", "noche"].forEach(turno => {
            const cel = document.createElement("td");
            cel.className = "p-3";
            cel.textContent = data[dia][turno].join(", ");
            fila.appendChild(cel);
          });

          tbody.appendChild(fila);
        });

        statusEl.classList.add("hidden");
        tabla.classList.remove("hidden");
      } catch (error) {
        statusEl.textContent = "❌ Error al cargar el horario: " + error.message;
        statusEl.className = "text-center text-red-600 font-semibold";
      }
    }

    cargarHorario();
  </script>
</body>
</html>
