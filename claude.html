<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Turnos de Cuidado - Tío Amado</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen py-8 px-4">
    <div class="max-w-6xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">Turnos de Cuidado</h1>
            <p class="text-xl text-gray-600">Hospital - Tío Amado</p>
            <div class="mt-4 bg-white rounded-lg shadow-sm p-4 inline-block">
                <p class="text-sm text-gray-500">Los cambios se guardan automáticamente</p>
            </div>
        </div>

        <!-- Schedule Table -->
        <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
            <div class="overflow-x-auto">
                <table class="w-full">
                    <!-- Table Header -->
                    <thead class="bg-gradient-to-r from-indigo-500 to-purple-600 text-white">
                        <tr>
                            <th class="py-4 px-6 text-left font-semibold">Día</th>
                            <th class="py-4 px-6 text-center font-semibold">Mañana<br><span class="text-sm font-normal opacity-80">(8:00 - 16:00)</span></th>
                            <th class="py-4 px-6 text-center font-semibold">Tarde<br><span class="text-sm font-normal opacity-80">(16:00 - 00:00)</span></th>
                            <th class="py-4 px-6 text-center font-semibold">Noche<br><span class="text-sm font-normal opacity-80">(00:00 - 8:00)</span></th>
                        </tr>
                    </thead>
                    
                    <!-- Table Body -->
                    <tbody id="schedule-body">
                        <!-- Rows will be generated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Legend -->
        <div class="mt-8 bg-white rounded-xl shadow-lg p-6">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">Cuidadores Disponibles</h3>
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
                <div class="bg-blue-50 rounded-lg p-3 text-center">
                    <span class="text-sm font-medium text-blue-800">Jesús y MariCarmen</span>
                </div>
                <div class="bg-green-50 rounded-lg p-3 text-center">
                    <span class="text-sm font-medium text-green-800">Lucía y Miguel</span>
                </div>
                <div class="bg-purple-50 rounded-lg p-3 text-center">
                    <span class="text-sm font-medium text-purple-800">José y Belén</span>
                </div>
                <div class="bg-orange-50 rounded-lg p-3 text-center">
                    <span class="text-sm font-medium text-orange-800">Conchi</span>
                </div>
                <div class="bg-pink-50 rounded-lg p-3 text-center">
                    <span class="text-sm font-medium text-pink-800">Ángel</span>
                </div>
                <div class="bg-indigo-50 rounded-lg p-3 text-center">
                    <span class="text-sm font-medium text-indigo-800">Tere</span>
                </div>
                <div class="bg-yellow-50 rounded-lg p-3 text-center">
                    <span class="text-sm font-medium text-yellow-800">Javi</span>
                </div>
                <div class="bg-red-50 rounded-lg p-3 text-center">
                    <span class="text-sm font-medium text-red-800">Pablo</span>
                </div>
                <div class="bg-teal-50 rounded-lg p-3 text-center">
                    <span class="text-sm font-medium text-teal-800">Alejandro</span>
                </div>
                <div class="bg-cyan-50 rounded-lg p-3 text-center">
                    <span class="text-sm font-medium text-cyan-800">Sandra</span>
                </div>
                <div class="bg-lime-50 rounded-lg p-3 text-center">
                    <span class="text-sm font-medium text-lime-800">Manolo</span>
                </div>
                <div class="bg-rose-50 rounded-lg p-3 text-center">
                    <span class="text-sm font-medium text-rose-800">Luisa</span>
                </div>
                <div class="bg-violet-50 rounded-lg p-3 text-center">
                    <span class="text-sm font-medium text-violet-800">José Manuel</span>
                </div>
            </div>
        </div>

        <!-- Reset Button -->
        <div class="text-center mt-8">
            <button onclick="resetSchedule()" class="bg-red-500 hover:bg-red-600 text-white font-semibold py-3 px-6 rounded-lg shadow-lg transition-colors duration-200">
                Limpiar Todos los Turnos
            </button>
        </div>
    </div>

    <script>
        // Configuración
        const days = ['Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado', 'Domingo'];
        const shifts = ['morning', 'afternoon', 'night'];
        const shiftNames = ['Mañana', 'Tarde', 'Noche'];
        const caregivers = [
            'Sin asignar',
            'Jesús y MariCarmen',
            'Lucía y Miguel',
            'José y Belén',
            'Conchi',
            'Ángel',
            'Tere',
            'Javi',
            'Pablo',
            'Alejandro',
            'Sandra',
            'Manolo',
            'Luisa',
            'José Manuel'
        ];

        // Colores para las filas alternadas
        const rowColors = ['bg-gray-50', 'bg-white'];

        // Función para cargar datos guardados
        function loadSavedData() {
            const saved = {};
            days.forEach(day => {
                shifts.forEach(shift => {
                    const key = `${day}-${shift}`;
                    const value = localStorage.getItem(key);
                    if (value) {
                        saved[key] = value;
                    }
                });
            });
            return saved;
        }

        // Función para guardar datos
        function saveData(day, shift, caregiver) {
            const key = `${day}-${shift}`;
            localStorage.setItem(key, caregiver);
        }

        // Función para crear un selector
        function createSelect(day, shift, savedValue = '') {
            const select = document.createElement('select');
            select.className = 'w-full p-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all duration-200 bg-white shadow-sm';
            select.onchange = function() {
                saveData(day, shift, this.value);
                updateSelectStyle(this);
            };

            caregivers.forEach(caregiver => {
                const option = document.createElement('option');
                option.value = caregiver;
                option.textContent = caregiver;
                if (caregiver === savedValue) {
                    option.selected = true;
                }
                select.appendChild(option);
            });

            updateSelectStyle(select);
            return select;
        }

        // Función para actualizar el estilo del selector según la selección
        function updateSelectStyle(select) {
            if (select.value === 'Sin asignar' || select.value === '') {
                select.className = 'w-full p-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all duration-200 bg-white shadow-sm';
            } else {
                select.className = 'w-full p-3 border-2 border-green-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all duration-200 bg-green-50 shadow-sm font-medium';
            }
        }

        // Función para generar la tabla
        function generateTable() {
            const tbody = document.getElementById('schedule-body');
            const savedData = loadSavedData();

            days.forEach((day, dayIndex) => {
                const row = document.createElement('tr');
                row.className = `${rowColors[dayIndex % 2]} hover:bg-indigo-50 transition-colors duration-200`;

                // Celda del día
                const dayCell = document.createElement('td');
                dayCell.className = 'py-4 px-6 font-semibold text-gray-700 border-r border-gray-200';
                dayCell.textContent = day;
                row.appendChild(dayCell);

                // Celdas de turnos
                shifts.forEach(shift => {
                    const cell = document.createElement('td');
                    cell.className = 'py-4 px-6 text-center border-r border-gray-200 last:border-r-0';
                    
                    const savedValue = savedData[`${day}-${shift}`] || 'Sin asignar';
                    const select = createSelect(day, shift, savedValue);
                    
                    cell.appendChild(select);
                    row.appendChild(cell);
                });

                tbody.appendChild(row);
            });
        }

        // Función para resetear el horario
        function resetSchedule() {
            if (confirm('¿Estás seguro de que quieres limpiar todos los turnos? Esta acción no se puede deshacer.')) {
                // Limpiar localStorage
                days.forEach(day => {
                    shifts.forEach(shift => {
                        localStorage.removeItem(`${day}-${shift}`);
                    });
                });
                
                // Regenerar la tabla
                document.getElementById('schedule-body').innerHTML = '';
                generateTable();
                
                alert('Todos los turnos han sido limpiados.');
            }
        }

        // Inicializar la aplicación
        document.addEventListener('DOMContentLoaded', function() {
            generateTable();
        });
    </script>
</body>
</html>